# vim: set syntax=yaml ts=2 sw=2 sts=2 et :

==============================================================================
                           CURRENT TODO LIST
==============================================================================

NOTE_TO_SELF:
  dd if=Qubes-20150204-x86_64-DVD.iso of=/dev/xvdi

CONFIGURATION:
- python-guimessages and whonix-setup-wizard are not yet signed
- qubes-whonix is not currently in patrick's repo; using github
  consider adding to own repo so they can be signed
- example-configs/extend-rules.conf
  - commented out 'export DIST=None' since 'make iso' was using the 'None'
    value when attempting to copy template
  - Make sure we can still do a 'make clean-all'

ALL: 
- Test with gnome installed; since Fedora installs gnome by default; Maybe
  graphics would be better if gnome-desktop-environment is also installed?

- Test building Fedora21 without my patches to pulse audio?  - Use Marmarek's

- REMOVE LXC code from distributions.sh


/usr/bin/glib-compile-schemas %{_datadir}/glib-2.0/schemas ??
/usr/bin/glib-compile-schemas /usr/share/glib-2.0/schemas ??
gsettings?

- I can't test netvm's cause of my network card, but these are the results I have gotten:
  debian 7:
    wired: Fail - Initially obtains IP, but when AppVM connects it loses connection
    wireless: Fail (no option to configure; no wireless driver?)
  debian 8:
    wired: Pass
    wireless: Fail (no option to configure; no wireless driver?)
  trusty:
    wired: Fail - Initially obtains IP, but when AppVM connects it loses connection
    wireless: Fail (no option to configure; no wireless driver?)
  utopic:
    wired: Fail
    wireless: Fail - option is presented to configure wireless, and connects to WIFI but no traffic
    

Working:
--------
Debian 7/8:
  + locales working
  + pulse
  + proxyvm
  + flash
  + new .desktop handler

Ubuntu trusty/utopic:
  + locales working
  + pulse
  + proxyvm
  + flash
  + new .desktop handler

Fedora 21:
  + locales working
  + pulse
  ? proxyvm
  ? flash -- not installed; will include repo
  ? new .desktop handler -- should work with code but not yet written to take 
    advantage of it.  Will need to be part of a trigger

qubes-builder
-------------------------------------------------------------------------------
- Create configuration files for debain that can just be copied to builer.conf
  -- with no use of setup
- Review README; remove those not required

Debian
-------------------------------------------------------------------------------
- Display issue where screen garbles
  - Also try my salt scripts; what about gsettings.. where that file; compare deb8 to deb8-gnome

- Appy theme for root (maybe kde in whonix?)
- Remove /X11_25xxx and place .xsettings, etc in .skel?; move to root as well?
- Qubes Manger will show updates are available but won't clear them after update

===============================================================================
DIFFERENCES BETWEEN DEBIAN-8 AND DEBIAN-8-GNOME

Seems like I do not experience the same screen junk errors with Debian-8 gnome?
===============================================================================
/etc/X11:
  XvMCConfig - contains: libXvMC.so.1
  xsm
/etc/X11/fonts:
  100dpi
  75dpi
  Type1
/etc/X11/XSession.d:
-rw-r--r--  1 root root  691 Oct 14  2012 55gnome-session_gnomerc
-rw-r--r--  1 root root   58 Feb 27  2014 60xbrlapi  -- brail api?

libxvmc1
x11-session-utils
xfonts-100dpi xfonts-75dpi xfonts-scalable

libxvmc1 x11-session-utils xfonts-100dpi xfonts-75dpi xfonts-scalable


Debian 7
--------


Debian 8
--------


Ubuntu
-------------------------------------------------------------------------------
- update appmenus once new packages installed
- if trusty and utopic actully work okay; see if vivid works too


Trusty + Utopic
---------------
Desktop flavour errors:  
  gnome-settings-daemon crashes on utopic startup (not tested with trusty or vivid yet)
  oneconf-service will crash about 3 minutes after boot
  oneconf-query will crash about 4 minutes after boot


Whonix
-------------------------------------------------------------------------------
Workstation:  Error Message to fix
  First boot! Whonix Repository Wizard should be run, but is not installed. It looks like Whonix Gateway is not fully installed!
  Click "Next" to finish Whonix Setup.



Fedora 21
-------------------------------------------------------------------------------
- Come up with another solution for qubes-app-linux-pdf-converter instead of using
  nautilus-actions orphaned package 
- Add adobe repo if its not installed
- Add other repos


Other / All
-------------------------------------------------------------------------------
gui-agent-linux
    - upstream still missing appvm-scripts/usrbin/qubes-session commit 
    - merge pulsecore changes for fc21 or try Marek's patch

qubes-app-linux-pdf-converter - merge; Marek wants other solution; not using orphaned package


===============================================================================
===============================================================================
==                                                                          ===
==                     R E S O L V E D   I S S U E S                        ===
==                                                                          ===
===============================================================================
===============================================================================

ALL:
----
- Added some more x-windows packages to packages-qubes.list to attempt to fix
  garbled screen.  The packages work with all Debian and Ubuntu dists.
  - TODO:  Copy to core-agent-linux if tests prove successful

- Fixed 'core-vchan-xen/vchan/Makefile.linux', moving libs to end to allow
  pulse audio to work in Ubuntu.  Needed to upgrade to pa5.0 though

- Removed:
  - acpid
  - xserver-xorg-core
  - x11-xserver-utils
  - xinit
  - browser-plugin-gnash

- Moved as a flavor; not included by default:
  - flashplugin-nonfree


Debian 7
--------
- pulseaudio now working -- had conflict with system pulse audio
  - fixed with new .desktop trigger handler code
  - pa 4.0 is available in backports but does not work (same issue
    Ubuntu had).  Still using pa 2.0


Debian 8
--------
- 'Files' menu link now back in whitelist as proper name


Trusty + Utopic
---------------
- Installed pulseaudio 5 PPA; version 4 has problems:
- Added a flash template flavor (+flash)
- Missing firefox on start (maybe just need to add to appmenus)
 1683 pts/0    Tl     0:00 vi start-pulseaudio-with-vchan
 1685 pts/1    S      0:00 /bin/sh /usr/bin/start-pulseaudio-with-vchan
 1686 pts/1    S      0:00 pulseaudio -vvvv --log-time=1 --start -n --file=/etc/pulse/qubes-default.pa --exit-idle-time=-1
 1688 ?        Ss     0:00 pulseaudio -vvvv --log-time=1 --start -n --file=/etc/pulse/qubes-default.pa --exit-idle-time=-1
 1689 ?        S<     0:00 pulseaudio -vvvv --log-time=1 --start -n --file=/etc/pulse/qubes-default.pa --exit-idle-time=-1
 1704 pts/0    S+     0:00 grep --color=auto -i pulse

- remove qubes repo def in /etc/apt/sources.list.d/qubes-r2.list


Whonix
-------------------------------------------------------------------------------
- Using most resent version of python-guimessages / whonix-setup-wizard
- Verified to work
- Automatically generates new Makefile, Makefile.builder and parser + commit
  on 'make template-modules'

Removed:
  - acpi-support-base


qubes-builder
-------------------------------------------------------------------------------
- issues with building quilt files and using Whonix makefile
  - make dist:  do that manually on test repo; see exactly what is included in .tar.gz
    and exactly how its named, then:
    - grep -q quilt .../debian/source/format
    -if quilt:  get name and ../tar it
  - This should get rid of wierd error and satisfy quilt requirements
